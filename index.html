<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/styles.css">

    <title>Conway's Game of Life</title>
</head>

<body>
    <header class="jumbotron">
        <div class="container">
            <div class="row">
                <h1>Conway's Game of Life</h1>
            </div>
    </header>

    <div class="container">
        <div class="row row-content">
            <div class="btn-group" role="group">
                <button class="btn btn-primary">Run</button>
                <button class="btn btn-danger">Stop</button>
            </div>
            <div class="btn-group mb-auto" role="group">
                <button class="btn btn-warning">Beautiful</button>
                <button class="btn btn-success">Random</button>
            </div>
            <div class="dropdown">
                <button class="btn btn-info dropdown-toggle" type="button" id="sizeButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    Reset Board
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#" id="board1">12*12</a>
                    <a class="dropdown-item" href="#" id="board2">24*24</a>
                    <a class="dropdown-item" href="#" id="board3">36*36</a>
                    <a class="dropdown-item" href="#" id="board4">48*48</a>
                </div>
            </div>
        </div>
        <div class="row row-content" id="board"></div>
    </div>

    <script src="node_modules/jquery/dist/jquery.slim.min.js"></script>
    <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            function drawBoard(size) {
                let boardContainer = document.createElement("div")
                boardContainer.classList.add("container")
                boardContainer.setAttribute('id', 'boardContainer')
                for (let i = 0; i < size; i++) {
                    let boardUnit = document.createElement("div")
                    boardUnit.classList.add("row")
                    boardUnit = drawBoardUnit(boardUnit, size)
                    boardContainer.append(boardUnit)
                }
                $("#board").append(boardContainer)
                addCellListener();
            }

            function drawBoardUnit(boardUnit, boardSize) {
                let newBoardUnit = boardUnit
                for (let i = 0; i < boardSize; i++) {
                    let cellContainer = document.createElement("div")
                    cellContainer.classList.add("container")
                    cellContainer.classList.add(`col-${12 / Number(boardSize)}`)
                    cellContainer = drawCellContainer(cellContainer)
                    boardUnit.append(cellContainer)
                }
                return newBoardUnit
            }

            function drawCellContainer(cellContainer) {
                let newCellContainer = cellContainer
                for (let i = 0; i < 12; i++) {
                    let cellRow = document.createElement("div")
                    cellRow.classList.add("row")
                    cellRow = drawCellRow(cellRow)
                    newCellContainer.append(cellRow)
                }
                return newCellContainer
            }

            function drawCellRow(cellRow) {
                let newCellRow = cellRow
                for (let i = 0; i < 12; i++) {
                    let cell = document.createElement("div")
                    cell.classList.add("cell")
                    cell.classList.add("col-1")
                    cell.classList.add("p-0")
                    newCellRow.append(cell)
                }
                return newCellRow
            }

            function addCellListener() {
                $(".cell").click(function () {
                    if ($(this).css("background-color") == "rgb(128, 128, 128)") {
                        $(this).css("background-color", "pink")
                    } else {
                        $(this).css("background-color", "gray")
                    }
                })
            }

            drawBoard(1)

            $("#board1").click(function () {
                $("#board").empty()
                drawBoard(1)
            })

            $("#board2").click(function () {
                $("#board").empty()
                drawBoard(2)
            })

            $("#board3").click(function () {
                $("#board").empty()
                drawBoard(3)
            })

            $("#board4").click(function () {
                $("#board").empty()
                drawBoard(4)
            })


        })
    </script>

    </div>
</body>

</html>